# Miovox Studio Fullstack Architecture Document

## Introduction

This document outlines the complete fullstack architecture for Miovox Studio, including backend systems, frontend implementation, and their integration. It serves as the single source of truth for AI-driven development, ensuring consistency across the entire technology stack. This unified approach combines what would traditionally be separate backend and frontend architecture documents, streamlining the development process for modern fullstack applications where these concerns are increasingly intertwined.

### Starter Template or Existing Project

We will use the **"T3 Stack" (`create-t3-app`)** installer to generate the project foundation. Critically, we will **de-select the optional backend components** (Prisma, tRPC, NextAuth) to ensure the MVP is lightweight and "right-sized" for a static site, while establishing a clear path for future scalability.

### Change Log

| Date       | Version | Description                | Author              |
| :--------- | :------ | :------------------------- | :------------------ |
| 2025-08-02 | 1.0     | Initial Architecture draft | Winston (Architect) |

---

## High Level Architecture

### Technical Summary

The architecture for Miovox Studio will be a modern, serverless Jamstack application. It will be built using a Next.js frontend, deployed statically for maximum performance and minimal cost. The system is designed with a "progressive complexity" approach; while the MVP is a static site, the foundation is laid for future expansion with serverless functions for features like a blog or contact form. This design directly supports the PRD goals of speed, low cost, and serving as a high-quality portfolio piece.

### Platform and Infrastructure Choice

- **Platform:** Vercel
- **Key Services:** Vercel's Global CDN for static hosting, and Vercel Functions for any future serverless API needs.
- **Deployment Regions:** Vercel's global edge network.
- **Rationale:** Vercel is the ideal platform as it's built by the creators of Next.js, offering a seamless and highly optimized deployment experience. Its free tier is generous and perfectly aligns with the project's budget constraints.

### Repository Structure

- **Structure:** Single Repository (Polyrepo).
- **Monorepo Tool:** N/A for the MVP.
- **Package Organization:** Standard Next.js project structure, as generated by `create-t3-app`.

### High Level Project Diagram

The high-level diagram shows a user's browser accessing the static Next.js site via Vercel's Global CDN, with a clear path for future expansion using Vercel Serverless Functions.

### Architectural and Design Patterns

- **Jamstack Architecture:** The frontend is pre-built into highly optimized static assets and served from a CDN. Dynamic functionality is handled by client-side JavaScript. **Rationale:** This provides optimal performance, higher security, and lower cost of scaling.
- **Static Site Generation (SSG):** Pages are generated at build time, not on a server for each request. **Rationale:** Ensures the fastest possible page loads for visitors.
- **Component-Based UI:** The user interface will be built as a series of reusable components in React. **Rationale:** Promotes maintainability, reusability, and a clean codebase.

---

## Tech Stack

| Category                     | Technology           | Version  | Purpose                              | Rationale                                                                |
| :--------------------------- | :------------------- | :------- | :----------------------------------- | :----------------------------------------------------------------------- |
| **Frontend Language**        | TypeScript           | `~5.4`   | Primary development language         | Strong typing to reduce runtime errors.                                  |
| **Frontend Framework**       | Next.js              | `~14.2`  | The core React framework.            | Enables SSG, performance optimizations, and future serverless functions. |
| **UI Library**               | React                | `~18.2`  | Library for building UI components.  | The industry standard and foundation of Next.js.                         |
| **UI Components**            | shadcn/ui            | `Latest` | Headless component library.          | Accelerates development with accessible, customizable components.        |
| **State Management**         | React Hooks          | `~18.2`  | For managing component-level state.  | Sufficient for the MVP's needs, avoids extra dependencies.               |
| **API Style**                | Serverless Functions | `Future` | Future backend implementation.       | Aligns with Jamstack architecture and low-cost goals.                    |
| **Unit/Integration Testing** | Vitest               | `~1.5`   | Test runner for components.          | Modern, fast, and integrates perfectly with the stack.                   |
| **E2E Testing**              | Cypress              | `~13.7`  | For testing complete user flows.     | Excellent developer experience and robust testing capabilities.          |
| **Styling**                  | Tailwind CSS         | `~3.4`   | Utility-first CSS framework.         | Allows for rapid, consistent styling directly in the markup.             |
| **CI/CD & Hosting**          | Vercel               | `N/A`    | Platform for deployment and hosting. | Seamless Git-based workflow and generous free tier.                      |

---

## Data Models

### Portfolio Project

- **Purpose:** Represents a single piece of work to be showcased on the website. For the MVP, this data will be stored in a simple JSON or TypeScript file within the project repository (e.g., `/data/portfolio.ts`).
- **TypeScript Interface:**
  ```typescript
  interface PortfolioProject {
    slug: string;
    title: string;
    date: string; // For sorting, in "YYYY-MM-DD" format
    shortDescription: string; // For the card view on the service page
    imageUrl: string; // The main "thumbnail" or "cover" image
    galleryImageUrls?: string[]; // (optional): For a gallery inside the modal
    content: string; // Detailed content for the modal, written in Markdown
    category: "AI" | "HomeTech" | "Events";
    isFeatured?: boolean; // (optional): To pin a project to the top of the list
  }
  ```
- **Future Considerations:** This file-based data source is intended for the MVP. The interface is designed to be compatible with modern Headless CMS platforms. A future upgrade would involve creating a matching content model in a CMS and replacing the local data import with an API fetch, with minimal to no changes required for the UI components.

---

## API Specification

For the MVP, the site is purely static and does not have a backend API. This section will be defined when serverless functions are added in a future phase.

---

## Components

### 1. Layout Components

- **`MainLayout`**: The top-level page wrapper, including `Header` and `Footer`.
- **`Container`**: Enforces the `max-width` and consistent padding for all page content.

### 2. Shared Components

- **`Card`**: Generic, reusable component providing the base style for service and portfolio cards.
- **`Header`**: Displays the logo and theme toggle.
- **`Footer`**: The multi-column footer with brand info, navigation, and social links.

### 3. Feature Components

- **`BrandPortal`**: Arranges the three service cards in a staggered grid on the homepage.
- **`PortfolioGallery`**: Displays a filtered grid of portfolio projects on service pages.
- **`PortfolioDetailModal`**: The URL-addressable modal for displaying detailed project content.
- **`InteractiveAbout`**: The component on the About page that manages the interactive hover effect.

---

## External APIs

The MVP is fully self-contained and does not require any external API integrations to function.

---

## Core Workflows

A sequence diagram illustrates the events when a user clicks a portfolio item. The flow involves the Page handling the click, updating the URL, and rendering the Project Modal. When the user closes the modal, the Page handles closing it and returning the URL to its previous state.

---

## Database Schema

The MVP will not use a traditional database. Data will be stored in a local project file. This section is not applicable.

---

## Frontend Architecture

### Component Architecture

- **Organization:** A standard `/src` layout with distinct folders for `/app` (routes), `/components` (ui, shared, features), `/data`, and `/styles`.
- **Template:** All components will be typed functional components using React and TypeScript.

### State Management Architecture

State will be managed exclusively with built-in React Hooks (`useState`, `useContext`) to maintain simplicity for the MVP.

### Routing Architecture

Routing is handled by the Next.js App Router, with URLs defined by the file system. URL-addressable modals will be implemented using Next.js's Intercepting Routes feature. All internal navigation uses the Next.js `<Link>` component for "app-style" client-side routing without full page reloads. Page transition animations (e.g., cross-fades) are a planned post-MVP enhancement.

### Frontend Services Layer

All data for the MVP will be imported directly from local TypeScript files.

---

## Backend Architecture

The MVP is a static Jamstack site with no backend server. This section is not applicable.

---

## Unified Project Structure

```text
miovox-com/
├── .github/
├── /docs
├── /public
├── /src
│   ├── /app
│   ├── /components
│   │   ├── /ui
│   │   ├── /shared
│   │   └── /features
│   ├── /data
│   └── /styles
├── .env.example
├── .eslintrc.json
├── next.config.mjs
├── package.json
├── tailwind.config.ts
└── tsconfig.json
```

## Development Workflow

The workflow will use `pnpm` as the package manager. Standard scripts (`pnpm dev`, `pnpm build`, `pnpm test`) will be used. The T3 starter provides a pre-configured, best-practice environment for linting, formatting, and TypeScript compilation. We will add environment variable validation with Zod and recommend key VS Code extensions.

---

## Deployment Architecture

A Git-based, "push-to-deploy" strategy will be used with Vercel. Pushes to any branch will create a unique Preview URL. Merges to the `main` branch will automatically deploy to production.

---

## Security and Performance

- **Security:** Vercel provides secure headers by default. React/Next.js provide XSS protection. Dependencies will be audited for vulnerabilities.
- **Performance:** The primary strategy is Static Site Generation (SSG) served via Vercel's Edge Network. Next.js's `<Image>` component will be used for automatic image optimization.

---

## Testing Strategy

The strategy follows the Testing Pyramid, with a base of Unit/Integration tests using **Vitest** and **React Testing Library**, and a small number of End-to-End tests using **Cypress**.

---

## Coding Standards

A minimal set of critical rules will be enforced, including strict TypeScript with no `any` types, centralized data access, styling exclusively with Tailwind CSS, and safe environment variable handling.

---

## Error Handling Strategy

The primary error handling mechanism for the MVP is a custom 404 "Not Found" page, implemented using Next.js's `not-found.tsx` file convention.

---

## Monitoring and Observability

**Vercel Analytics** will be enabled to monitor Core Web Vitals, page views, and visitor data, providing real-user performance insights with zero client-side code.

---

## Checklist Results Report

### Final Decision

**READY FOR DEVELOPMENT:** The architecture is comprehensive, robust, and validated. It serves as a complete blueprint for implementation.

---

## Next Steps

This Fullstack Architecture Document, along with the PRD and UI/UX Specification, should be saved in the `/docs` folder of your `miovox-com` repository.

The next agent in the BMad workflow is the `*po` (Product Owner) or `*sm` (Scrum Master) to begin the development phase by sharding these documents and creating the first story for implementation.
